<!DOCTYPE html>
<html>
<body style="margin:0px;">
<script type="text/javascript">
// Get someArg value inside iframe dialog
function zInsertGalleryImage(content){
	var editor=parent.tinymce.activeEditor;
	
	//var someArg = editor.windowManager.getParams().someArg;
	//editor.insertContent(win.getContentWindow().document.getElementById('content').value);
	editor.insertContent(content);
	// Close the top most window
	editor.windowManager.close();
}
</script>
<iframe id="iframeGalleryId" src="/z/admin/files/gallery" width="100%" height="10" scrolling="auto" marginheight="0" marginwidth="0" frameborder="0" style="border:0px; padding:0px; margin:0px; margin-bottom:0px; "></iframe>
<!--	<h3>Custom dialog</h3>
	Input some text: <input id="content">
	<button onclick="top.tinymce.activeEditor.windowManager.getWindows()[0].close();">Close window</button>-->
	<script type="text/javascript">
	function setIframeHeight(){
		console.log(parent.$);
		
		parent.$(".mce-floatpanel").each(function(){
			if(parent.$(this).attr("aria-label") == "Insert Image"){ 
				parent.$( this).attr('style', 'left:5%; top:5%; width:90%;    border-width: 1px;    z-index: 65536;    ');
				
				parent.$('.mce-window-body', this).attr('style', 'width:100%; ');
				
				parent.$('.mce-foot', this).attr('style', 'width:100%; ');
				
				parent.$('.mce-container-body', this).attr('style', 'width:100%; ');
				
				parent.$('.mce-foot .mce-btn', this).attr('style', 'float:left; position:relative; left:0px; margin-top:5px; margin-bottom:5px;  margin-left:10px; ');  
			}
		});
		var parentWindowHeight=parent.zWindowSize.height; 
		parent.$(".mce-window-body").height(Math.round(parentWindowHeight*.7)+"px");
		
		var body = document.body, html = document.documentElement;

		var height = Math.max( body.scrollHeight, body.offsetHeight, 
						   html.clientHeight, html.scrollHeight, html.offsetHeight );
		document.getElementById("iframeGalleryId").height=height;
		 
	}
	parent.$(window).bind("resize clientresize", function(){
		setIframeHeight();
	});
	setIframeHeight();
	</script>
</body>
</html>